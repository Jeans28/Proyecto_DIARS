<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<title>Catalogo de productos</title>
<link rel="stylesheet" type="text/css" th:href="@{/css/bootstrap.min.css}" />
<script type="text/javascript" th:src="@{/js/jquery-3.5.1.min.js}"></script>
<script type="text/javascript" th:src="@{/js/bootstrap.min.js}"></script>
<script type="text/javascript" th:src="@{/js/popper.min.js}"></script>
<script defer src="https://use.fontawesome.com/releases/v5.0.6/js/all.js"></script>
<script src="https://use.fontawesome.com/your-embed-code.js"></script>
<script type="text/javascript" th:src="@{/js/jquery.cookie.js}"></script>
<script th:src="@{/js/funciones.js}"></script>	
</head>
<body>
	<div class="container">
		<div>
			<nav class="navbar navbar-expand-lg navbar-dark bg-dark" >
				<a class="navbar-brand" href="/catalogo">Bodega</a>
				<button class="navbar-toggler" type="button" data-toggle="collapse"
					data-target="#navbarSupportedContent"
					aria-controls="navbarSupportedContent" aria-expanded="false"
					aria-label="Toggle navigation">
					<span class="navbar-toggler-icon"></span>
				</button>

				<div class="collapse navbar-collapse" id="navbarSupportedContent">
					<ul class="navbar-nav mr-auto">
						<li class="nav-item active"><a class="nav-link" href="/catalogo">Home<span
								class="sr-only">(current)</span></a></li>
						<li class="nav-item">
						<a class="nav-link" href="#">
						<i class="fas fa-cart-plus"></i><label style="color:orange" th:value="${contador}"></label>
						</a></li>
						<li class="nav-item"><a class="nav-link " href="#"
							tabindex="-1">Acerca de la Bodega</a></li>
					</ul>
					<form th:action="@{/catalogon}" th:object="${producto}" class="form-inline my-2 my-lg-0" method="GET" >
						<input class="form-control mr-sm-2" type="text" th:field="*{nombre}" 
							placeholder="Buscar">
						<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Buscar</button>
					</form>
					<ul class="navbar-nav">
						<li class="nav-item dropdown"><a
							class="nav-link dropdown-toggle" th:href="@{/}"
							id="navbarDropdown" role="button" data-toggle="dropdown"
							aria-haspopup="true">Iniciar Sesion</a>
							<div class="dropdown-menu" aria-labelledby="navbarDropdown"> <a
									class="dropdown-item" th:href="@{/}" >Ingresar</a>
								<div class="dropdown-divider"></div>
								<a class="dropdown-item" th:href="@{/login}">Salir</a>
							</div>
						</li>
					</ul>
				</div>
			</nav>
		</div>
		<br>
		<div class="row">
			<a th:text="${usuario}"></a>
			<div th:each="producto: ${productos}" th:if="${producto.estado == 1}">
				<div class="col-md-4 mb-3">
					<div class="card border-secondary" style="width: 21rem;">
						<div class="card-header">
							<h4 class="card-title d-flex justify-content-center"
								th:text="${producto.nombre}"></h4>
						</div>
						<img th:src="@{'uploads/'}+ ${producto.foto}" class="card-img-top"
							th:alt="${producto.foto}"
							style="max-whidt: 90%; max-heigth: 100%;" />
						<div class="card-body">
							<p class="card-text d-flex justify-content-center"
								th:text="${producto.descripcion}"></p>
							<h5 class="text-danger d-flex justify-content-center"
								th:text="'S/.'+${producto.precio}"></h5>
								<!-- 
							<form th:action="@{/carrito}" th:object="${producto}" class="form-inline my-3 my-lg-1" method="POST" >
								<input type="hidden" class="form-control mr-sm-2" th:value="${producto.idproducto}" th:name="idproducto">
								<input type="hidden" class="form-control mr-sm-2" th:name="cantidad" th:value="1">
								<button class="btn btn-primary" type="submit">Agregar a carrito</button>
							</form>					
							 -->	
							<button class="btn btn-primary add-to-cart" type="button" th:data-productid="${producto.idproducto}">Agregar a carrito</button>
							<a th:href="@{/carrito}+${producto.idproducto}" class="btn btn-danger">Comprar</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</body>
</html>
